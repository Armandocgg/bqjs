<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
        <meta charset="utf-8">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
        <title>BaqJS</title>
    </head>
    <body>
        <style>
            body {
                background: #f6f6f6;
                font-family: sans-serif;
                margin: 0;
            }

        </style>
        <div id="main"></div>

        <script type="module">
            import { header } from './header.js';
            import { consoleTempl } from './htmlConsole.js';
            import { members } from './members.js';
        
            

            const template = `
                <div>
                    ${ header }
                    ${ consoleTempl }
                    ${ members }
                </div>
            `;      
            document.getElementById("main").innerHTML = template;
        </script>

                <script type="text/javascript" language="javascript">
                    var http_request = false;
                    var members = null;

                    function loadJSON(callback) {   
                        var xobj = new XMLHttpRequest();
                            xobj.overrideMimeType("application/json");
                        xobj.open('GET', 'members.json', true); // Reads content from members.json
                        xobj.onreadystatechange = function () {
                            if (xobj.readyState == 4 && xobj.status == "200") {
                                callback(xobj.responseText);
                                members.forEach(element => {
                                    let member = document.createElement("li");
                                    member.classList.add(element.role + '-flex-item');
                                    member.innerHTML = `
                                            <div class="${element.role}-image-cropper">
                                             <img src=${element.photo} alt="Photo of `+ element.name +` " class="member-photo">
                                            </div>
                                         <div class="member-name">`+ element.name +`</div>
                                     `
                                    document.getElementById('js-' + element.role + '-list').appendChild(member);
                                });
                            }
                        };
                        xobj.send(null);  
                        }
                    function init() {
                        loadJSON(function(response) {
                        // Parse JSON string into object
                            members = JSON.parse(response);
                        });
                    }
                    function load() {
                        // alert("evento load detectado!");
                        init();
                    }
                    window.onload = load;
                </script>
                
    </body>
</html>
